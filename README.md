## Описание
http://website-main.unaux.com/
- Сайт интернет-магазин для предприятия Текстиль-Профи М.
- Включает в себя каталог товаров, структурированный по разделам и категориям, с фильтрами, сортировкой, пагинацией.
- Корзина с добавлением товаров, изменением количества и оформлением заказа с отправкой уведомления с составом заказа клиенту и админстратору.
- Личный кабинет (регистрация, авторизация, редактирование профиля, просмотр истории активности аккаунта, просмотр заказов).
## Развертывание приложения
### Стек технологий
- Apache2, PHP 7.4, MySql 8+, JQuery, HTML, CSS
### Инструкция для Windows
- Установить OpenServer (Apache2, PHP 7.4, MySql 8)
- Разместить исходный код приложения в директории проектов OpenServer (Папка с проектами)
- В настройках добавить домен для проекта, указав директорию с исходным кодом (Настройки -> Домены)
- Добавить домен в Hosts файл для открытия доступа к localhost по адресу домена (Дополнительно -> Конфигурация -> Hosts файл)
- Настроить конфигурационный класс Config.php (задать настройки подключения к базе данных, информацию об организации и почтового клиента)
- Перейти в phpMyAdmin, создать базу данных, пользователя и задать его пароль в соответствии с настройками конфигурации
- Импортировать дамп базы данных в базу, созданную на предыдущем этапе

## Описание архитектуры, структуры директорий и файлов проекта
### Корневая директория
- **.htaccess** - файл донастройки Apache2, задаёт настройки позволяющие перенаправлять все запросы на файл index.php
- **Config.php** - файл класса, отвечающего за конфигурацию приложения (подключение к базе данных, информация об организации и сайте, электронная почта администратора, товар для отображения на главной странице).
- **index.php** - входная точка приложения, все поступающие запросы перенаправляются на него. В нём регистрируются все классы и зависимости, определяются маршруты запросов ($router->add()), вызывается метод dispatch() класса Router с текущим маршрутом.
### Директория general
- **Router.php** - отвечает за регистрацию всех маршрутов через метод add() (используется в index.php), а также за определение на основе маршрута метода контроллера для вызова.
- **Database.php** - отвечает за создание нового подключения к базе данных, получение существующего. Реализован через паттерн Singleton.
- **Logger.php** - отвечает за логгирование информации в директории log, в заданном файле.
- **Validator.php** - содержит в себе реализации общих, базовых валидаторов.
- **PHPMailer** - директория с исходным кодом расширения PHPMailer для отправки почты в PHP.
### Директория controllers
- **BaseController.php** - является базовым классом, от которого наследуются все контроллеры. Содержит общие методы для предобработки данных запроса, проверки авторизации пользователя, редиректа, получения заголовка страницы и т.д.
- **MainController.php** - .определяет методы для обработки запросов связаныых с главной страницей (отображение, получение списка категорий по типу, товаров по категории и т.д.)
- **AuthController.php** - определяет методы для обработки запросов связанных с регистрацией и авторизацией пользователей.
- **AccountController.php** - определяет методы для работы с данными пользователя (редактирование профиля, изменение пароля, получение списка активностей).
- **CartController.php** - определяет методы для работы с корзиной (получение содержимого корзины, добавление/убавление/изменение количества позиции, удаление позиции). Корзина сохраняется в Сессии приложения.
- **OrderController.php** - определяет методы для работы с заказами авторизованного пользователя (отображение списка заказов, получение списка заказов, получение заказа, создание заказа, заказ пошива штор).
### Директория services
- **AuthService.php** - сервис реализации функционала Регистрации и Авторизации.
- **ProfileService.php** - сервис реализации функционала редактирования Профиля.
- **ActivityHistoriesService.php** - сервис реализации функционала добавления/вывода списка истории активности пользователя.
- **ProductService.php** - сервис реализации функционала вывода списка товаров по категории
- **CartService.php** - сервис реализации функционала работы с корзиной.
- **OrderService.php** - сервис реализации функционала создания Заказа (с отправкой на почту администратора и клиента), получения списка заказов.
- **MailService.php** - сервис отправки Email сообщений. В своей реализации использует расширение PHPMailer.
### Директория models
- **Model.php** - является базовым классом, от которого наследуются все модели. Содержит общие поля (название таблицы, подключение к БД), общие методы реализации работы с данными модели (CRUD).
- **Остальные модели** - представляют собой частные реализации класса Model, содержат как переопределения базовых методов, так и дополнительные.
### Директория validators
- **ListValidator.php** - класс-валидатор, который можно использоваться для входных данных маршрутов, которые используются для получения каких-либо списочных данных.
- **OrderValidator.php** - класс-валидатор для валидации данных заказа пошива штор.
- **UserValidator.php** - класс-валидатор данных пользователя.
### Директория views
- **Поддиректория common** - содержит общие представления: представление модального окна корзины, страницы неизвестного маршрута 404.php.
- **Поддиректория account** - содержит файл шаблона (template.php), представления модальных окон: редактирования профиля, изменения пароля, просмотра заказа (папка modal), представления: страницы профиля и заказов пользователя.
- **Поддиректория main** - содержит файл шаблона (template.php), представления модальных окон: регистрация, авторизация, заказ пошива штор (авторизаванный пользователь), заказ пошива штор (неавторизованный пользователь) (папка modal), представления главной страницы и страницы категории.
### Директория resources
- **Поддиректория css** - содержит css файлы приложения, структурированные в соответствии с разделами (account, main), страницами (orders, profile, index, category) аналогично представлениям (с шаблонами).
- **Поддиректория js** - содержит js файлы приложения, структурированные в соответствии с разделами (account, main), страницами (orders, profile, index, category) аналогично представлениям (с шаблонами).
- **Поддиректория img** - содержит файлы изображений, используемых в приложении. Файл **no-avatar.png** - файл по умолчанию для аватара пользователя. **favicon.ico** - файл иконки сайта. **categories** - директория для изображений категорий, с поддиректориями, у котороых id категории в названии. **products** - директория для изображений товаров, с поддиректориями, у котороых id товара в названии.
### Директория email
- **order.html** - файл шаблона Email для уведомления о новом заказе для администратора.
- **order-user.html** - файл шаблона Email для уведомления о новом заказе для покупателя.
- **order-curtains.html** - файл шаблона Email для уведомления о новом заказе на пошив штор.
### Директория helpers
- **RequestSender.php** - класс, содержащий метод для отправки запросов через curl к сторонним сервисам.
- **DateTimeHelper.php** - класс, содержащий метод для осуществления форматирования строки даты и времени в заданный формат.
### Директория log
- Содержит в себе все файлы логирования приложения